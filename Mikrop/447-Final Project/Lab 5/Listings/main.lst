


ARM Macro Assembler    Page 1 


    1 00000000         ;*******************************************************
                       ******** 
    2 00000000         ; EQU Directives
    3 00000000         ; These directives do not allocate memory
    4 00000000         ;*******************************************************
                       ********
    5 00000000         ;SYMBOL    DIRECTIVE VALUE   COMMENT
    6 00000000         
    7 00000000 40038000 
                       ADC0_ACTSS
                               EQU              0x40038000  ; Active Sample Seq
                                                            uencer
    8 00000000 400380A4 
                       ADC0_SSCTL3
                               EQU              0x400380A4  ; Sample Sequence C
                                                            ontrol 3
    9 00000000 40038014 
                       ADC0_EMUX
                               EQU              0x40038014  ; Event Multiplexer
                                                             Select
   10 00000000 400380A0 
                       ADC0_SSMUX3
                               EQU              0x400380A0  ; SS Input Mux. Sel
                                                            ect 3
   11 00000000 40038FC4 
                       ADC0_PC EQU              0x40038FC4  ; Peripheral Contro
                                                            l
   12 00000000 40038028 
                       ADC0_PSSI
                               EQU              0x40038028  ; Processor SS Init
                                                            iate 
   13 00000000 40038004 
                       ADC0_RIS
                               EQU              0x40038004  ; Raw Interrupt Sta
                                                            tus
   14 00000000 400380A8 
                       ADC0_SSFIFO3
                               EQU              0x400380A8  ; SSFIFO3 Buffer Re
                                                            g. (Value of Oldest
                                                             Sample)  
   15 00000000 4003800C 
                       ADC0_ISC
                               EQU              0x4003800C  ; Interrupt Status 
                                                            Clear    
   16 00000000         
   17 00000000 20000400 
                       Data_address
                               EQU              0x20000400
   18 00000000         
   19 00000000         ;*******************************************************
                       ********
   20 00000000         ; Directives - This Data Section is part of the code
   21 00000000         ; It is in the read only section  so values cannot be ch
                       anged.
   22 00000000         ;*******************************************************
                       ******** 
   23 00000000         ;LABEL  DIRECTIVE VALUE   COMMENT
   24 00000000                 AREA             sdata, DATA, READONLY
   25 00000000                 THUMB



ARM Macro Assembler    Page 2 


   26 00000000         
   27 00000000         ;*******************************************************
                       ********
   28 00000000         ; Program section           
   29 00000000         ;*******************************************************
                       ********
   30 00000000         ;LABEL  DIRECTIVE VALUE     COMMENT
   31 00000000                 AREA             main, READONLY, CODE, ALIGN=2
   32 00000000                 THUMB
   33 00000000                 EXTERN           CONVRT
   34 00000000                 EXTERN           OutStr
   35 00000000                 EXTERN           ADC_INIT
   36 00000000                 EXPORT           __main      ; Make available
   37 00000000         
   38 00000000         
   39 00000000         ;*******************************************************
                       ********
   40 00000000         ; Main Function
   41 00000000         ;*******************************************************
                       ******** 
   42 00000000         ;LABEL  DIRECTIVE VALUE     COMMENT
   43 00000000         __main  PROC
   44 00000000 F7FF FFFE       BL               ADC_INIT    ;initialize ADC
   45 00000004 F04F 0680       MOV              R6, #0x80   ;Register to store 
                                                            past reading
   46 00000008         
   47 00000008 4D1F    start   LDR              R5, =ADC0_PSSI ; set bit 3 to s
                                                            tart SS3 for ADC0
   48 0000000A 6828            LDR              R0, [R5]
   49 0000000C F040 0008       ORR              R0, R0, #0x08
   50 00000010 6028            STR              R0, [R5]
   51 00000012         
   52 00000012         
   53 00000012 4D1E    read    LDR              R5, =ADC0_RIS
   54 00000014 6828            LDR              R0, [R5]
   55 00000016 F090 0F08       TEQ              R0, #0x08   ; since ADC0 uses S
                                                            S3 in this example,
                                                             check for bit3
   56 0000001A         ;   BNE   read
   57 0000001A         
   58 0000001A 4D1D            LDR              R5, =ADC0_SSFIFO3
   59 0000001C 6829            LDR              R1, [R5]    ; read the value fr
                                                            om FIFO3 
   60 0000001E         
   61 0000001E 4D1D            LDR              R5, =ADC0_ISC
   62 00000020 F04F 0008       MOV              R0, #0x08
   63 00000024 6028            STR              R0, [R5]    ; clear bit 3 for S
                                                            S3 of ADC0
   64 00000026         
   65 00000026         
   66 00000026         
   67 00000026         
   68 00000026 F106 02F9 
                       compare ADD              R2,R6,#0xF9 ; Add 0.2 V to read
                                                             value   
   69 0000002A 1A52            SUBS             R2,R2,R1    ; Subtract new valu
                                                            e from old value + 
                                                            0.2 V
   70 0000002C D404            BMI              Hex2X       ; if new value is m



ARM Macro Assembler    Page 3 


                                                            ore than 0.2 V high
                                                            er writes the value
                                                            
   71 0000002E F1A6 02F9       SUB              R2,R6,#0xF9 ; subtracts 0.2 V f
                                                            rom read value
   72 00000032 1A52            SUBS             R2,R2,R1    ; Subtract new valu
                                                            e from old value + 
                                                            0.2 V
   73 00000034 D500            BPL              Hex2X       ; if new value is m
                                                            ore than 0.2 V lowe
                                                            r writes the value
   74 00000036 E7E7            B                start       ; if the change is 
                                                            smaller than 0.2 V
   75 00000038         
   76 00000038         
   77 00000038 460E    Hex2X   MOV              R6,R1       ;Archive the new re
                                                            ad value
   78 0000003A F04F 0200       MOV              R2, #0
   79 0000003E         loop
   80 0000003E         ;our X value
   81 0000003E F5B1 6F9B       CMP              R1, #0x4D8  ;Compare with 1V th
                                                            reshold to find X v
                                                            alue
   82 00000042 D404            BMI              Hex2YZ      ;If smaller, then f
                                                            ind YZ component
   83 00000044 F102 0201       ADD              R2,R2,#1    ;increase X by one
   84 00000048 F2A1 41D9       SUB              R1,R1,#0x4D9 ;subract 1 Volt fr
                                                            om read value
   85 0000004C E7F7            B                loop
   86 0000004E         
   87 0000004E F04F 000D 
                       Hex2YZ  MOV              R0,#0xD
   88 00000052 FBB1 F3F0       UDIV             R3,R1,R0    ; divide remaining 
                                                            part of read to obt
                                                            ain YZ
   89 00000056         
   90 00000056 4D10    XYZ     LDR              R5, =Data_address
   91 00000058 4614            MOV              R4,R2
   92 0000005A F7FF FFFE       BL               CONVRT      ; Convert X value t
                                                            o ASCII and updates
                                                             data address
   93 0000005E F04F 002E       MOV              R0, #0x2E   ; ASCII code of dot
                                                            
   94 00000062 F845 0B01       STR              R0,[R5],#1
   95 00000066         
   96 00000066 2B0A            CMP              R3,#10
   97 00000068         ;   BMI   dual
   98 00000068         ;   MOV   R0, #0x30
   99 00000068         ;   STR   R0,[R5],#1
  100 00000068         
  101 00000068 461C    dual    MOV              R4,R3
  102 0000006A F7FF FFFE       BL               CONVRT
  103 0000006E F04F 000D       MOV              R0, #0x0D   ;ASCII code for end
                                                             of line
  104 00000072 F845 0B01       STR              R0,[R5],#1
  105 00000076 F04F 0004       MOV              R0, #0x04   ;ASCII code of end 
                                                            of transmission
  106 0000007A F845 0B01       STR              R0,[R5],#1
  107 0000007E         



ARM Macro Assembler    Page 4 


  108 0000007E 4D06            LDR              R5, =Data_address 
                                                            ;reset data adress
  109 00000080 F7FF FFFE       BL               OutStr
  110 00000084         
  111 00000084 E7C0            B                start
  112 00000086         
  113 00000086         ;*******************************************************
                       ********
  114 00000086         ; End of the program  section
  115 00000086         ;*******************************************************
                       ********
  116 00000086         ;LABEL      DIRECTIVE       VALUE                       
                           COMMENT
  117 00000086                 ENDP
  118 00000086 00 00           ALIGN
  119 00000088                 END
              40038028 
              40038004 
              400380A8 
              4003800C 
              20000400 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_Target_1 -ID:\Work
\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -ID:\Work\ARM\CMSIS\Includ
e --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 526" --predef
ine="TM4C123GH6PM SETA 1" --list=.\listings\main.lst Main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

sdata 00000000

Symbol: sdata
   Definitions
      At line 24 in file Main.s
   Uses
      None
Comment: sdata unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Hex2X 00000038

Symbol: Hex2X
   Definitions
      At line 77 in file Main.s
   Uses
      At line 70 in file Main.s
      At line 73 in file Main.s

Hex2YZ 0000004E

Symbol: Hex2YZ
   Definitions
      At line 87 in file Main.s
   Uses
      At line 82 in file Main.s
Comment: Hex2YZ used once
XYZ 00000056

Symbol: XYZ
   Definitions
      At line 90 in file Main.s
   Uses
      None
Comment: XYZ unused
__main 00000000

Symbol: __main
   Definitions
      At line 43 in file Main.s
   Uses
      At line 36 in file Main.s
Comment: __main used once
compare 00000026

Symbol: compare
   Definitions
      At line 68 in file Main.s
   Uses
      None
Comment: compare unused
dual 00000068

Symbol: dual
   Definitions
      At line 101 in file Main.s
   Uses
      None
Comment: dual unused
loop 0000003E

Symbol: loop
   Definitions
      At line 79 in file Main.s
   Uses
      At line 85 in file Main.s
Comment: loop used once
main 00000000




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: main
   Definitions
      At line 31 in file Main.s
   Uses
      None
Comment: main unused
read 00000012

Symbol: read
   Definitions
      At line 53 in file Main.s
   Uses
      None
Comment: read unused
start 00000008

Symbol: start
   Definitions
      At line 47 in file Main.s
   Uses
      At line 74 in file Main.s
      At line 111 in file Main.s

10 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

ADC0_ACTSS 40038000

Symbol: ADC0_ACTSS
   Definitions
      At line 7 in file Main.s
   Uses
      None
Comment: ADC0_ACTSS unused
ADC0_EMUX 40038014

Symbol: ADC0_EMUX
   Definitions
      At line 9 in file Main.s
   Uses
      None
Comment: ADC0_EMUX unused
ADC0_ISC 4003800C

Symbol: ADC0_ISC
   Definitions
      At line 15 in file Main.s
   Uses
      At line 61 in file Main.s
Comment: ADC0_ISC used once
ADC0_PC 40038FC4

Symbol: ADC0_PC
   Definitions
      At line 11 in file Main.s
   Uses
      None
Comment: ADC0_PC unused
ADC0_PSSI 40038028

Symbol: ADC0_PSSI
   Definitions
      At line 12 in file Main.s
   Uses
      At line 47 in file Main.s
Comment: ADC0_PSSI used once
ADC0_RIS 40038004

Symbol: ADC0_RIS
   Definitions
      At line 13 in file Main.s
   Uses
      At line 53 in file Main.s
Comment: ADC0_RIS used once
ADC0_SSCTL3 400380A4

Symbol: ADC0_SSCTL3
   Definitions
      At line 8 in file Main.s
   Uses
      None
Comment: ADC0_SSCTL3 unused
ADC0_SSFIFO3 400380A8

Symbol: ADC0_SSFIFO3



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 14 in file Main.s
   Uses
      At line 58 in file Main.s
Comment: ADC0_SSFIFO3 used once
ADC0_SSMUX3 400380A0

Symbol: ADC0_SSMUX3
   Definitions
      At line 10 in file Main.s
   Uses
      None
Comment: ADC0_SSMUX3 unused
Data_address 20000400

Symbol: Data_address
   Definitions
      At line 17 in file Main.s
   Uses
      At line 90 in file Main.s
      At line 108 in file Main.s

10 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

ADC_INIT 00000000

Symbol: ADC_INIT
   Definitions
      At line 35 in file Main.s
   Uses
      At line 44 in file Main.s
Comment: ADC_INIT used once
CONVRT 00000000

Symbol: CONVRT
   Definitions
      At line 33 in file Main.s
   Uses
      At line 92 in file Main.s
      At line 102 in file Main.s

OutStr 00000000

Symbol: OutStr
   Definitions
      At line 34 in file Main.s
   Uses
      At line 109 in file Main.s
Comment: OutStr used once
3 symbols
360 symbols in table
