


ARM Macro Assembler    Page 1 


    1 00000000         ;*******************************************************
                       ******** 
    2 00000000         ; EQU Directives
    3 00000000         ; These directives do not allocate memory
    4 00000000         ;*******************************************************
                       ********
    5 00000000         ;SYMBOL    DIRECTIVE VALUE   COMMENT
    6 00000000 400253FC 
                       GPIO_PORTF_DATA_R
                               EQU              0x400253FC
    7 00000000 40025400 
                       GPIO_PORTF_DIR_R
                               EQU              0x40025400
    8 00000000 40025420 
                       GPIO_PORTF_AFSEL_R
                               EQU              0x40025420
    9 00000000 40025510 
                       GPIO_PORTF_PUR_R
                               EQU              0x40025510
   10 00000000 4002551C 
                       GPIO_PORTF_DEN_R
                               EQU              0x4002551C
   11 00000000 40025520 
                       GPIO_PORTF_LOCK_R
                               EQU              0x40025520
   12 00000000 40025524 
                       GPIO_PORTF_CR_R
                               EQU              0x40025524
   13 00000000 40025528 
                       GPIO_PORTF_AMSEL_R
                               EQU              0x40025528
   14 00000000 4002552C 
                       GPIO_PORTF_PCTL_R
                               EQU              0x4002552C
   15 00000000 4C4F434B 
                       GPIO_LOCK_KEY
                               EQU              0x4C4F434B  ; Unlocks the GPIO_
                                                            CR register
   16 00000000 00000002 
                       RED     EQU              0x02
   17 00000000 00000004 
                       BLUE    EQU              0x04
   18 00000000 00000008 
                       GREEN   EQU              0x08
   19 00000000 00000010 
                       SW1     EQU              0x10        ; on the left side 
                                                            of the Launchpad bo
                                                            ard
   20 00000000 00000001 
                       SW2     EQU              0x01        ; on the right side
                                                             of the Launchpad b
                                                            oard
   21 00000000 400FE608 
                       SYSCTL_RCGCGPIO_R
                               EQU              0x400FE608
   22 00000000         
   23 00000000         
   24 00000000         
   25 00000000         ;*******************************************************



ARM Macro Assembler    Page 2 


                       ********
   26 00000000         ; Directives - This Data Section is part of the code
   27 00000000         ; It is in the read only section  so values cannot be ch
                       anged.
   28 00000000         ;*******************************************************
                       ******** 
   29 00000000         
   30 00000000         ;*******************************************************
                       ********
   31 00000000         ; Program section           
   32 00000000         ;*******************************************************
                       ********
   33 00000000         ;LABEL  DIRECTIVE VALUE     COMMENT
   34 00000000                 AREA             routines,READONLY,CODE
   35 00000000                 THUMB
   36 00000000                 ALIGN
   37 00000000                 EXTERN           WINNER
   38 00000000                 EXTERN           LOSER
   39 00000000         
   40 00000000         ; EXTERN SHIP_CURSOR
   41 00000000         ;*******************************************************
                       ********
   42 00000000         ; PORTF INITIALIZATION
   43 00000000         ; INITIALIZE PF0 AND PF4 FOR PUSH BUTTONS ON THE BOARD
   44 00000000         ;*******************************************************
                       ******** 
   45 00000000                 EXPORT           PORTF_INIT
   46 00000000         PORTF_INIT
                               PROC
   47 00000000 B500            PUSH             {LR}
   48 00000002 4928            LDR              R1, =SYSCTL_RCGCGPIO_R ; 1) act
                                                            ivate clock for Por
                                                            t F
   49 00000004 6808            LDR              R0, [R1]
   50 00000006 F040 0020       ORR              R0, R0, #0x20 ; set bit 5 to tu
                                                            rn on clock
   51 0000000A 6008            STR              R0, [R1]
   52 0000000C BF00            NOP
   53 0000000E BF00            NOP                          ; allow time for cl
                                                            ock to finish
   54 00000010 4925            LDR              R1, =GPIO_PORTF_LOCK_R ; 2) unl
                                                            ock the lock regist
                                                            er
   55 00000012 4826            LDR              R0, =0x4C4F434B ; unlock GPIO P
                                                            ort F Commit Regist
                                                            er
   56 00000014 6008            STR              R0, [R1]
   57 00000016 4926            LDR              R1, =GPIO_PORTF_CR_R ; enable c
                                                            ommit for Port F
   58 00000018 F04F 00FF       MOV              R0, #0xFF   ; 1 means allow acc
                                                            ess
   59 0000001C 6008            STR              R0, [R1]
   60 0000001E 4925            LDR              R1, =GPIO_PORTF_AMSEL_R ; 3) di
                                                            sable analog functi
                                                            onality
   61 00000020 F04F 0000       MOV              R0, #0      ; 0 means analog is
                                                             off
   62 00000024 6008            STR              R0, [R1]
   63 00000026 4924            LDR              R1, =GPIO_PORTF_PCTL_R ; 4) con



ARM Macro Assembler    Page 3 


                                                            figure as GPIO
   64 00000028 F04F 0000       MOV              R0, #0x00000000 ; 0 means confi
                                                            gure Port F as GPIO
                                                            
   65 0000002C 6008            STR              R0, [R1]
   66 0000002E 4923            LDR              R1, =GPIO_PORTF_DIR_R ; 5) set 
                                                            direction register
   67 00000030 F04F 000E       MOV              R0,#0x0E    ; PF0 and PF7-4 inp
                                                            ut, PF3-1 output
   68 00000034 6008            STR              R0, [R1]
   69 00000036 4922            LDR              R1, =GPIO_PORTF_AFSEL_R ; 6) re
                                                            gular port function
                                                            
   70 00000038 F04F 0000       MOV              R0, #0      ; 0 means disable a
                                                            lternate function 
   71 0000003C 6008            STR              R0, [R1]
   72 0000003E 4921            LDR              R1, =GPIO_PORTF_PUR_R ; pull-up
                                                             resistors for PF4,
                                                            PF0
   73 00000040 F04F 0011       MOV              R0, #0x11   ; enable weak pull-
                                                            up on PF0 and PF4
   74 00000044 6008            STR              R0, [R1]
   75 00000046 4920            LDR              R1, =GPIO_PORTF_DEN_R ; 7) enab
                                                            le Port F digital p
                                                            ort
   76 00000048 F04F 00FF       MOV              R0, #0xFF   ; 1 means enable di
                                                            gital I/O
   77 0000004C 6008            STR              R0, [R1]
   78 0000004E F85D EB04       POP{LR}
   79 00000052 4770            BX               LR
   80 00000054                 ENDP
   81 00000054         
   82 00000054         ;------------delay------------
   83 00000054         ; Delay function for testing, which delays about 3*count
                        cycles.
   84 00000054         ; Input: R0  count
   85 00000054         ; Output: none
   86 00000054 00516155 
                       ONESEC  EQU              5333333     ; approximately 1s 
                                                            delay at ~16 MHz cl
                                                            ock
   87 00000054 00145855 
                       QUARTERSEC
                               EQU              1333333     ; approximately 0.2
                                                            5s delay at ~16 MHz
                                                             clock
   88 00000054 001046AA 
                       FIFTHSEC
                               EQU              1066666     ; approximately 0.2
                                                            s delay at ~16 MHz 
                                                            clock
   89 00000054         
   90 00000054                 EXPORT           delay
   91 00000054         delay   PROC
   92 00000054         ;PUSH {LR}
   93 00000054 1E40            SUBS             R0, R0, #1  ; R0 = R0 - 1 (coun
                                                            t = count - 1)
   94 00000056 D1FE            BNE              delay       ; if count (R0) != 
                                                            0, skip to 'delay'



ARM Macro Assembler    Page 4 


   95 00000058         ; POP{LR}
   96 00000058 4770            BX               LR          ; return
   97 0000005A                 ENDP
   98 0000005A         
   99 0000005A         
  100 0000005A         ;------------PortF_Input------------
  101 0000005A         ; Read and return the status of the switches.
  102 0000005A         ; R0 keeps the data according to push buttons
  103 0000005A                 EXPORT           PortF_Input
  104 0000005A         PortF_Input
                               PROC
  105 0000005A B500            PUSH             {LR}
  106 0000005C 491B            LDR              R1, =GPIO_PORTF_DATA_R ; pointe
                                                            r to Port F data
  107 0000005E 6808            LDR              R0, [R1]    ; read all of Port 
                                                            F
  108 00000060 F000 0011       AND              R0,R0,#0x11 ; just the input pi
                                                            ns PF0 and PF4
  109 00000064 F85D EB04       POP              {LR}
  110 00000068 4770            BX               LR          ; return R0 with in
                                                            puts      GPIO PORT
                                                            F DATA KEEPS THE PU
                                                            SH BUTTON OPTIONS
  111 0000006A                 ENDP
  112 0000006A         
  113 0000006A         
  114 0000006A         
  115 0000006A         ;*******************************************************
                       ********
  116 0000006A         ; THIS IS THE LOOP TO CHECK WHETHER THE PUSH BUTTON IS P
                       RESSED OR NOT
  117 0000006A         ;  POLLING OPERATION
  118 0000006A         ;   BRANCHS TO VISUALIZING SHIP SUBROUTINE
  119 0000006A         ; BRANCHS TO ADC MODULES TO GET THE LOCATION
  120 0000006A         ;*******************************************************
                       ******** 
  121 0000006A                 EXTERN           ADC_READ_SHIP ; INCLUDE ADC REA
                                                            DING MODULES
  122 0000006A                 EXTERN           ADC_READ_CURSOR
  123 0000006A         ; EXTERN delay
  124 0000006A         ; EXTERN PortF_Input
  125 0000006A                 EXTERN           ADDRESS_CHANGE
  126 0000006A                 EXPORT           PUSHBUTTON
  127 0000006A         ;LABEL  DIRECTIVE VALUE     COMMENT
  128 0000006A         
  129 0000006A         PUSHBUTTON
                               PROC
  130 0000006A B500            PUSH             {LR}
  131 0000006C         loop
  132 0000006C         
  133 0000006C 4818            LDR              R0, =FIFTHSEC ; R0 = FIFTHSEC (
                                                            delay 0.2 second)
  134 0000006E F7FF FFFE       BL               delay       ; delay at least (3
                                                            *R0) cycles
  135 00000072         
  136 00000072 F7FF FFFE       BL               ADC_READ_SHIP ;;; READ SHIP LOC
                                                            ATION 
  137 00000076 F7FF FFFE       BL               PortF_Input ; read all of the s
                                                            witches on Port F



ARM Macro Assembler    Page 5 


  138 0000007A         
  139 0000007A         ; LSL R0,R0, #24; ;; SHIFT 24 TIMES
  140 0000007A         ; ADD R4, R4, R0 ;  R4 KEEPS STATUS OF PUSHUTTONS AND XY
                        DATA
  141 0000007A         
  142 0000007A         
  143 0000007A         ;BL CURSORLOCATION VISUALIZER FALAN 
  144 0000007A         ;;deneme deneme deneme 
  145 0000007A F404 427F       AND              R2,R4,#0xFF00 ;Y coordinates
  146 0000007E EA4F 2212       LSR              R2, #8      ;
  147 00000082 F04F 0108       MOV              R1, #8      ;
  148 00000086 FBB2 F2F1       UDIV             R2, R2, R1  ; 
  149 0000008A EA4F 2202       LSL              R2, #8      ;
  150 0000008E F004 03FF       AND              R3,R4,#0x00FF ;Y coordinates
  151 00000092         ; LSR    R2, #8;
  152 00000092 EB02 0803       ADD              R8, R2,R3   ;;
  153 00000096 F7FF FFFE       BL               WINNER
  154 0000009A         
  155 0000009A         
  156 0000009A         ;COMPARE THE CONDITION FOR 4 SHIPS 
  157 0000009A         ; BEQ FINISH
  158 0000009A         
  159 0000009A E7E7            B                loop
  160 0000009C F85D EB04 
                       FINISH  POP{LR}                      ; EXIT THE SUBMODUL
                                                            E IF THERE ARE 4 SH
                                                            IPS
  161 000000A0 4770            BX               LR
  162 000000A2                 ENDP
  163 000000A2         
  164 000000A2         
  165 000000A2         
  166 000000A2 00 00           ALIGN                        ; 
  167 000000A4                 END                          ; end of file
              400FE608 
              40025520 
              4C4F434B 
              40025524 
              40025528 
              4002552C 
              40025400 
              40025420 
              40025510 
              4002551C 
              400253FC 
              001046AA 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\pushbutton.d -o.\objects\pushbutton.o -I.\RTE\_Target
_1 -IC:\Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v
5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION 
SETA 526" --predefine="TM4C123GH6PM SETA 1" --list=.\listings\pushbutton.lst PU
SHBUTTON.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

FINISH 0000009C

Symbol: FINISH
   Definitions
      At line 160 in file PUSHBUTTON.s
   Uses
      None
Comment: FINISH unused
PORTF_INIT 00000000

Symbol: PORTF_INIT
   Definitions
      At line 46 in file PUSHBUTTON.s
   Uses
      At line 45 in file PUSHBUTTON.s
Comment: PORTF_INIT used once
PUSHBUTTON 0000006A

Symbol: PUSHBUTTON
   Definitions
      At line 129 in file PUSHBUTTON.s
   Uses
      At line 126 in file PUSHBUTTON.s
Comment: PUSHBUTTON used once
PortF_Input 0000005A

Symbol: PortF_Input
   Definitions
      At line 104 in file PUSHBUTTON.s
   Uses
      At line 103 in file PUSHBUTTON.s
      At line 137 in file PUSHBUTTON.s

delay 00000054

Symbol: delay
   Definitions
      At line 91 in file PUSHBUTTON.s
   Uses
      At line 90 in file PUSHBUTTON.s
      At line 94 in file PUSHBUTTON.s
      At line 134 in file PUSHBUTTON.s

loop 0000006C

Symbol: loop
   Definitions
      At line 131 in file PUSHBUTTON.s
   Uses
      At line 159 in file PUSHBUTTON.s
Comment: loop used once
routines 00000000

Symbol: routines
   Definitions
      At line 34 in file PUSHBUTTON.s
   Uses
      None
Comment: routines unused



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

BLUE 00000004

Symbol: BLUE
   Definitions
      At line 17 in file PUSHBUTTON.s
   Uses
      None
Comment: BLUE unused
FIFTHSEC 001046AA

Symbol: FIFTHSEC
   Definitions
      At line 88 in file PUSHBUTTON.s
   Uses
      At line 133 in file PUSHBUTTON.s
Comment: FIFTHSEC used once
GPIO_LOCK_KEY 4C4F434B

Symbol: GPIO_LOCK_KEY
   Definitions
      At line 15 in file PUSHBUTTON.s
   Uses
      None
Comment: GPIO_LOCK_KEY unused
GPIO_PORTF_AFSEL_R 40025420

Symbol: GPIO_PORTF_AFSEL_R
   Definitions
      At line 8 in file PUSHBUTTON.s
   Uses
      At line 69 in file PUSHBUTTON.s
Comment: GPIO_PORTF_AFSEL_R used once
GPIO_PORTF_AMSEL_R 40025528

Symbol: GPIO_PORTF_AMSEL_R
   Definitions
      At line 13 in file PUSHBUTTON.s
   Uses
      At line 60 in file PUSHBUTTON.s
Comment: GPIO_PORTF_AMSEL_R used once
GPIO_PORTF_CR_R 40025524

Symbol: GPIO_PORTF_CR_R
   Definitions
      At line 12 in file PUSHBUTTON.s
   Uses
      At line 57 in file PUSHBUTTON.s
Comment: GPIO_PORTF_CR_R used once
GPIO_PORTF_DATA_R 400253FC

Symbol: GPIO_PORTF_DATA_R
   Definitions
      At line 6 in file PUSHBUTTON.s
   Uses
      At line 106 in file PUSHBUTTON.s
Comment: GPIO_PORTF_DATA_R used once
GPIO_PORTF_DEN_R 4002551C

Symbol: GPIO_PORTF_DEN_R



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 10 in file PUSHBUTTON.s
   Uses
      At line 75 in file PUSHBUTTON.s
Comment: GPIO_PORTF_DEN_R used once
GPIO_PORTF_DIR_R 40025400

Symbol: GPIO_PORTF_DIR_R
   Definitions
      At line 7 in file PUSHBUTTON.s
   Uses
      At line 66 in file PUSHBUTTON.s
Comment: GPIO_PORTF_DIR_R used once
GPIO_PORTF_LOCK_R 40025520

Symbol: GPIO_PORTF_LOCK_R
   Definitions
      At line 11 in file PUSHBUTTON.s
   Uses
      At line 54 in file PUSHBUTTON.s
Comment: GPIO_PORTF_LOCK_R used once
GPIO_PORTF_PCTL_R 4002552C

Symbol: GPIO_PORTF_PCTL_R
   Definitions
      At line 14 in file PUSHBUTTON.s
   Uses
      At line 63 in file PUSHBUTTON.s
Comment: GPIO_PORTF_PCTL_R used once
GPIO_PORTF_PUR_R 40025510

Symbol: GPIO_PORTF_PUR_R
   Definitions
      At line 9 in file PUSHBUTTON.s
   Uses
      At line 72 in file PUSHBUTTON.s
Comment: GPIO_PORTF_PUR_R used once
GREEN 00000008

Symbol: GREEN
   Definitions
      At line 18 in file PUSHBUTTON.s
   Uses
      None
Comment: GREEN unused
ONESEC 00516155

Symbol: ONESEC
   Definitions
      At line 86 in file PUSHBUTTON.s
   Uses
      None
Comment: ONESEC unused
QUARTERSEC 00145855

Symbol: QUARTERSEC
   Definitions
      At line 87 in file PUSHBUTTON.s
   Uses



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      None
Comment: QUARTERSEC unused
RED 00000002

Symbol: RED
   Definitions
      At line 16 in file PUSHBUTTON.s
   Uses
      None
Comment: RED unused
SW1 00000010

Symbol: SW1
   Definitions
      At line 19 in file PUSHBUTTON.s
   Uses
      None
Comment: SW1 unused
SW2 00000001

Symbol: SW2
   Definitions
      At line 20 in file PUSHBUTTON.s
   Uses
      None
Comment: SW2 unused
SYSCTL_RCGCGPIO_R 400FE608

Symbol: SYSCTL_RCGCGPIO_R
   Definitions
      At line 21 in file PUSHBUTTON.s
   Uses
      At line 48 in file PUSHBUTTON.s
Comment: SYSCTL_RCGCGPIO_R used once
19 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

ADC_READ_CURSOR 00000000

Symbol: ADC_READ_CURSOR
   Definitions
      At line 122 in file PUSHBUTTON.s
   Uses
      None
Comment: ADC_READ_CURSOR unused
ADC_READ_SHIP 00000000

Symbol: ADC_READ_SHIP
   Definitions
      At line 121 in file PUSHBUTTON.s
   Uses
      At line 136 in file PUSHBUTTON.s
Comment: ADC_READ_SHIP used once
ADDRESS_CHANGE 00000000

Symbol: ADDRESS_CHANGE
   Definitions
      At line 125 in file PUSHBUTTON.s
   Uses
      None
Comment: ADDRESS_CHANGE unused
LOSER 00000000

Symbol: LOSER
   Definitions
      At line 38 in file PUSHBUTTON.s
   Uses
      None
Comment: LOSER unused
WINNER 00000000

Symbol: WINNER
   Definitions
      At line 37 in file PUSHBUTTON.s
   Uses
      At line 153 in file PUSHBUTTON.s
Comment: WINNER used once
5 symbols
367 symbols in table
