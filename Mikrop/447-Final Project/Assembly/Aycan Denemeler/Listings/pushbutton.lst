


ARM Macro Assembler    Page 1 


    1 00000000         ;*******************************************************
                       ******** 
    2 00000000         ; EQU Directives
    3 00000000         ; These directives do not allocate memory
    4 00000000         ;*******************************************************
                       ********
    5 00000000         ;SYMBOL    DIRECTIVE VALUE   COMMENT
    6 00000000 400253FC 
                       GPIO_PORTF_DATA_R
                               EQU              0x400253FC
    7 00000000 40025400 
                       GPIO_PORTF_DIR_R
                               EQU              0x40025400
    8 00000000 40025420 
                       GPIO_PORTF_AFSEL_R
                               EQU              0x40025420
    9 00000000 40025510 
                       GPIO_PORTF_PUR_R
                               EQU              0x40025510
   10 00000000 4002551C 
                       GPIO_PORTF_DEN_R
                               EQU              0x4002551C
   11 00000000 40025520 
                       GPIO_PORTF_LOCK_R
                               EQU              0x40025520
   12 00000000 40025524 
                       GPIO_PORTF_CR_R
                               EQU              0x40025524
   13 00000000 40025528 
                       GPIO_PORTF_AMSEL_R
                               EQU              0x40025528
   14 00000000 4002552C 
                       GPIO_PORTF_PCTL_R
                               EQU              0x4002552C
   15 00000000 4C4F434B 
                       GPIO_LOCK_KEY
                               EQU              0x4C4F434B  ; Unlocks the GPIO_
                                                            CR register
   16 00000000 00000002 
                       RED     EQU              0x02
   17 00000000 00000004 
                       BLUE    EQU              0x04
   18 00000000 00000008 
                       GREEN   EQU              0x08
   19 00000000 00000010 
                       SW1     EQU              0x10        ; on the left side 
                                                            of the Launchpad bo
                                                            ard
   20 00000000 00000001 
                       SW2     EQU              0x01        ; on the right side
                                                             of the Launchpad b
                                                            oard
   21 00000000 400FE608 
                       SYSCTL_RCGCGPIO_R
                               EQU              0x400FE608
   22 00000000         
   23 00000000         
   24 00000000         
   25 00000000         ;*******************************************************



ARM Macro Assembler    Page 2 


                       ********
   26 00000000         ; Directives - This Data Section is part of the code
   27 00000000         ; It is in the read only section  so values cannot be ch
                       anged.
   28 00000000         ;*******************************************************
                       ******** 
   29 00000000         
   30 00000000         ;*******************************************************
                       ********
   31 00000000         ; Program section           
   32 00000000         ;*******************************************************
                       ********
   33 00000000         ;LABEL  DIRECTIVE VALUE     COMMENT
   34 00000000                 AREA             routines,READONLY,CODE
   35 00000000                 THUMB
   36 00000000                 ALIGN
   37 00000000                 EXTERN           WINNER
   38 00000000                 EXTERN           LOSER
   39 00000000         
   40 00000000         ; EXTERN SHIP_CURSOR
   41 00000000         ;*******************************************************
                       ********
   42 00000000         ; PORTF INITIALIZATION
   43 00000000         ; INITIALIZE PF0 AND PF4 FOR PUSH BUTTONS ON THE BOARD
   44 00000000         ;*******************************************************
                       ******** 
   45 00000000                 EXPORT           PORTF_INIT
   46 00000000         PORTF_INIT
                               PROC
   47 00000000 B500            PUSH             {LR}
   48 00000002 4923            LDR              R1, =SYSCTL_RCGCGPIO_R ; 1) act
                                                            ivate clock for Por
                                                            t F
   49 00000004 6808            LDR              R0, [R1]
   50 00000006 F040 0020       ORR              R0, R0, #0x20 ; set bit 5 to tu
                                                            rn on clock
   51 0000000A 6008            STR              R0, [R1]
   52 0000000C BF00            NOP
   53 0000000E BF00            NOP                          ; allow time for cl
                                                            ock to finish
   54 00000010 4920            LDR              R1, =GPIO_PORTF_LOCK_R ; 2) unl
                                                            ock the lock regist
                                                            er
   55 00000012 4821            LDR              R0, =0x4C4F434B ; unlock GPIO P
                                                            ort F Commit Regist
                                                            er
   56 00000014 6008            STR              R0, [R1]
   57 00000016 4921            LDR              R1, =GPIO_PORTF_CR_R ; enable c
                                                            ommit for Port F
   58 00000018 F04F 00FF       MOV              R0, #0xFF   ; 1 means allow acc
                                                            ess
   59 0000001C 6008            STR              R0, [R1]
   60 0000001E 4920            LDR              R1, =GPIO_PORTF_AMSEL_R ; 3) di
                                                            sable analog functi
                                                            onality
   61 00000020 F04F 0000       MOV              R0, #0      ; 0 means analog is
                                                             off
   62 00000024 6008            STR              R0, [R1]
   63 00000026 491F            LDR              R1, =GPIO_PORTF_PCTL_R ; 4) con



ARM Macro Assembler    Page 3 


                                                            figure as GPIO
   64 00000028 F04F 0000       MOV              R0, #0x00000000 ; 0 means confi
                                                            gure Port F as GPIO
                                                            
   65 0000002C 6008            STR              R0, [R1]
   66 0000002E 491E            LDR              R1, =GPIO_PORTF_DIR_R ; 5) set 
                                                            direction register
   67 00000030 F04F 000E       MOV              R0,#0x0E    ; PF0 and PF7-4 inp
                                                            ut, PF3-1 output
   68 00000034 6008            STR              R0, [R1]
   69 00000036 491D            LDR              R1, =GPIO_PORTF_AFSEL_R ; 6) re
                                                            gular port function
                                                            
   70 00000038 F04F 0000       MOV              R0, #0      ; 0 means disable a
                                                            lternate function 
   71 0000003C 6008            STR              R0, [R1]
   72 0000003E 491C            LDR              R1, =GPIO_PORTF_PUR_R ; pull-up
                                                             resistors for PF4,
                                                            PF0
   73 00000040 F04F 0011       MOV              R0, #0x11   ; enable weak pull-
                                                            up on PF0 and PF4
   74 00000044 6008            STR              R0, [R1]
   75 00000046 491B            LDR              R1, =GPIO_PORTF_DEN_R ; 7) enab
                                                            le Port F digital p
                                                            ort
   76 00000048 F04F 00FF       MOV              R0, #0xFF   ; 1 means enable di
                                                            gital I/O
   77 0000004C 6008            STR              R0, [R1]
   78 0000004E F85D EB04       POP{LR}
   79 00000052 4770            BX               LR
   80 00000054                 ENDP
   81 00000054         
   82 00000054         ;------------delay------------
   83 00000054         ; Delay function for testing, which delays about 3*count
                        cycles.
   84 00000054         ; Input: R0  count
   85 00000054         ; Output: none
   86 00000054 00516155 
                       ONESEC  EQU              5333333     ; approximately 1s 
                                                            delay at ~16 MHz cl
                                                            ock
   87 00000054 00145855 
                       QUARTERSEC
                               EQU              1333333     ; approximately 0.2
                                                            5s delay at ~16 MHz
                                                             clock
   88 00000054 001046AA 
                       FIFTHSEC
                               EQU              1066666     ; approximately 0.2
                                                            s delay at ~16 MHz 
                                                            clock
   89 00000054         
   90 00000054                 EXPORT           delay
   91 00000054         delay   PROC
   92 00000054 B500            PUSH             {LR}
   93 00000056 1E40            SUBS             R0, R0, #1  ; R0 = R0 - 1 (coun
                                                            t = count - 1)
   94 00000058 D1FE            BNE              delay       ; if count (R0) != 
                                                            0, skip to 'delay'



ARM Macro Assembler    Page 4 


   95 0000005A F85D EB04       POP{LR}
   96 0000005E 4770            BX               LR          ; return
   97 00000060                 ENDP
   98 00000060         
   99 00000060         
  100 00000060         ;------------PortF_Input------------
  101 00000060         ; Read and return the status of the switches.
  102 00000060         ; R0 keeps the data according to push buttons
  103 00000060                 EXPORT           PortF_Input
  104 00000060         PortF_Input
                               PROC
  105 00000060 B500            PUSH             {LR}
  106 00000062 4915            LDR              R1, =GPIO_PORTF_DATA_R ; pointe
                                                            r to Port F data
  107 00000064 6808            LDR              R0, [R1]    ; read all of Port 
                                                            F
  108 00000066 F000 0011       AND              R0,R0,#0x11 ; just the input pi
                                                            ns PF0 and PF4
  109 0000006A F85D EB04       POP              {LR}
  110 0000006E 4770            BX               LR          ; return R0 with in
                                                            puts      GPIO PORT
                                                            F DATA KEEPS THE PU
                                                            SH BUTTON OPTIONS
  111 00000070                 ENDP
  112 00000070         
  113 00000070         
  114 00000070         
  115 00000070         ;*******************************************************
                       ********
  116 00000070         ; THIS IS THE LOOP TO CHECK WHETHER THE PUSH BUTTON IS P
                       RESSED OR NOT
  117 00000070         ;  POLLING OPERATION
  118 00000070         ;   BRANCHS TO VISUALIZING SHIP SUBROUTINE
  119 00000070         ; BRANCHS TO ADC MODULES TO GET THE LOCATION
  120 00000070         ;*******************************************************
                       ******** 
  121 00000070                 EXTERN           ADC_READ_SHIP ; INCLUDE ADC REA
                                                            DING MODULES
  122 00000070                 EXTERN           ADC_READ_CURSOR
  123 00000070         ; EXTERN delay
  124 00000070         ; EXTERN PortF_Input
  125 00000070                 EXPORT           PUSHBUTTON
  126 00000070         ;LABEL  DIRECTIVE VALUE     COMMENT
  127 00000070         
  128 00000070         PUSHBUTTON
                               PROC
  129 00000070 B500            PUSH             {LR}
  130 00000072         loop
  131 00000072         
  132 00000072 4812            LDR              R0, =FIFTHSEC ; R0 = FIFTHSEC (
                                                            delay 0.2 second)
  133 00000074 F7FF FFFE       BL               delay       ; delay at least (3
                                                            *R0) cycles
  134 00000078         
  135 00000078 F7FF FFFE       BL               ADC_READ_SHIP ;;; READ SHIP LOC
                                                            ATION 
  136 0000007C F7FF FFFE       BL               PortF_Input ; read all of the s
                                                            witches on Port F
  137 00000080         



ARM Macro Assembler    Page 5 


  138 00000080 EA4F 6000       LSL              R0,R0, #24  ; ;; SHIFT 24 TIMES
                                                            
  139 00000084 4404            ADD              R4, R4, R0  ;
  140 00000086         
  141 00000086         ;BL CURSORLOCATION VISUALIZER FALAN 
  142 00000086         ;COMPARE THE CONDITION FOR 4 SHIPS 
  143 00000086         ; BEQ FINISH
  144 00000086         
  145 00000086 E7F4            B                loop
  146 00000088 F85D EB04 
                       FINISH  POP{LR}                      ; EXIT THE SUBMODUL
                                                            E IF THERE ARE 4 SH
                                                            IPS
  147 0000008C 4770            BX               LR
  148 0000008E                 ENDP
  149 0000008E         
  150 0000008E         
  151 0000008E         
  152 0000008E 00 00           ALIGN                        ; 
  153 00000090                 END                          ; end of file
              400FE608 
              40025520 
              4C4F434B 
              40025524 
              40025528 
              4002552C 
              40025400 
              40025420 
              40025510 
              4002551C 
              400253FC 
              001046AA 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\pushbutton.d -o.\objects\pushbutton.o -I.\RTE\_Target
_1 -IC:\Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v
5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION 
SETA 526" --predefine="TM4C123GH6PM SETA 1" --list=.\listings\pushbutton.lst PU
SHBUTTON.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

FINISH 00000088

Symbol: FINISH
   Definitions
      At line 146 in file PUSHBUTTON.s
   Uses
      None
Comment: FINISH unused
PORTF_INIT 00000000

Symbol: PORTF_INIT
   Definitions
      At line 46 in file PUSHBUTTON.s
   Uses
      At line 45 in file PUSHBUTTON.s
Comment: PORTF_INIT used once
PUSHBUTTON 00000070

Symbol: PUSHBUTTON
   Definitions
      At line 128 in file PUSHBUTTON.s
   Uses
      At line 125 in file PUSHBUTTON.s
Comment: PUSHBUTTON used once
PortF_Input 00000060

Symbol: PortF_Input
   Definitions
      At line 104 in file PUSHBUTTON.s
   Uses
      At line 103 in file PUSHBUTTON.s
      At line 136 in file PUSHBUTTON.s

delay 00000054

Symbol: delay
   Definitions
      At line 91 in file PUSHBUTTON.s
   Uses
      At line 90 in file PUSHBUTTON.s
      At line 94 in file PUSHBUTTON.s
      At line 133 in file PUSHBUTTON.s

loop 00000072

Symbol: loop
   Definitions
      At line 130 in file PUSHBUTTON.s
   Uses
      At line 145 in file PUSHBUTTON.s
Comment: loop used once
routines 00000000

Symbol: routines
   Definitions
      At line 34 in file PUSHBUTTON.s
   Uses
      None
Comment: routines unused



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

BLUE 00000004

Symbol: BLUE
   Definitions
      At line 17 in file PUSHBUTTON.s
   Uses
      None
Comment: BLUE unused
FIFTHSEC 001046AA

Symbol: FIFTHSEC
   Definitions
      At line 88 in file PUSHBUTTON.s
   Uses
      At line 132 in file PUSHBUTTON.s
Comment: FIFTHSEC used once
GPIO_LOCK_KEY 4C4F434B

Symbol: GPIO_LOCK_KEY
   Definitions
      At line 15 in file PUSHBUTTON.s
   Uses
      None
Comment: GPIO_LOCK_KEY unused
GPIO_PORTF_AFSEL_R 40025420

Symbol: GPIO_PORTF_AFSEL_R
   Definitions
      At line 8 in file PUSHBUTTON.s
   Uses
      At line 69 in file PUSHBUTTON.s
Comment: GPIO_PORTF_AFSEL_R used once
GPIO_PORTF_AMSEL_R 40025528

Symbol: GPIO_PORTF_AMSEL_R
   Definitions
      At line 13 in file PUSHBUTTON.s
   Uses
      At line 60 in file PUSHBUTTON.s
Comment: GPIO_PORTF_AMSEL_R used once
GPIO_PORTF_CR_R 40025524

Symbol: GPIO_PORTF_CR_R
   Definitions
      At line 12 in file PUSHBUTTON.s
   Uses
      At line 57 in file PUSHBUTTON.s
Comment: GPIO_PORTF_CR_R used once
GPIO_PORTF_DATA_R 400253FC

Symbol: GPIO_PORTF_DATA_R
   Definitions
      At line 6 in file PUSHBUTTON.s
   Uses
      At line 106 in file PUSHBUTTON.s
Comment: GPIO_PORTF_DATA_R used once
GPIO_PORTF_DEN_R 4002551C

Symbol: GPIO_PORTF_DEN_R



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

   Definitions
      At line 10 in file PUSHBUTTON.s
   Uses
      At line 75 in file PUSHBUTTON.s
Comment: GPIO_PORTF_DEN_R used once
GPIO_PORTF_DIR_R 40025400

Symbol: GPIO_PORTF_DIR_R
   Definitions
      At line 7 in file PUSHBUTTON.s
   Uses
      At line 66 in file PUSHBUTTON.s
Comment: GPIO_PORTF_DIR_R used once
GPIO_PORTF_LOCK_R 40025520

Symbol: GPIO_PORTF_LOCK_R
   Definitions
      At line 11 in file PUSHBUTTON.s
   Uses
      At line 54 in file PUSHBUTTON.s
Comment: GPIO_PORTF_LOCK_R used once
GPIO_PORTF_PCTL_R 4002552C

Symbol: GPIO_PORTF_PCTL_R
   Definitions
      At line 14 in file PUSHBUTTON.s
   Uses
      At line 63 in file PUSHBUTTON.s
Comment: GPIO_PORTF_PCTL_R used once
GPIO_PORTF_PUR_R 40025510

Symbol: GPIO_PORTF_PUR_R
   Definitions
      At line 9 in file PUSHBUTTON.s
   Uses
      At line 72 in file PUSHBUTTON.s
Comment: GPIO_PORTF_PUR_R used once
GREEN 00000008

Symbol: GREEN
   Definitions
      At line 18 in file PUSHBUTTON.s
   Uses
      None
Comment: GREEN unused
ONESEC 00516155

Symbol: ONESEC
   Definitions
      At line 86 in file PUSHBUTTON.s
   Uses
      None
Comment: ONESEC unused
QUARTERSEC 00145855

Symbol: QUARTERSEC
   Definitions
      At line 87 in file PUSHBUTTON.s
   Uses



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

      None
Comment: QUARTERSEC unused
RED 00000002

Symbol: RED
   Definitions
      At line 16 in file PUSHBUTTON.s
   Uses
      None
Comment: RED unused
SW1 00000010

Symbol: SW1
   Definitions
      At line 19 in file PUSHBUTTON.s
   Uses
      None
Comment: SW1 unused
SW2 00000001

Symbol: SW2
   Definitions
      At line 20 in file PUSHBUTTON.s
   Uses
      None
Comment: SW2 unused
SYSCTL_RCGCGPIO_R 400FE608

Symbol: SYSCTL_RCGCGPIO_R
   Definitions
      At line 21 in file PUSHBUTTON.s
   Uses
      At line 48 in file PUSHBUTTON.s
Comment: SYSCTL_RCGCGPIO_R used once
19 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

ADC_READ_CURSOR 00000000

Symbol: ADC_READ_CURSOR
   Definitions
      At line 122 in file PUSHBUTTON.s
   Uses
      None
Comment: ADC_READ_CURSOR unused
ADC_READ_SHIP 00000000

Symbol: ADC_READ_SHIP
   Definitions
      At line 121 in file PUSHBUTTON.s
   Uses
      At line 135 in file PUSHBUTTON.s
Comment: ADC_READ_SHIP used once
LOSER 00000000

Symbol: LOSER
   Definitions
      At line 38 in file PUSHBUTTON.s
   Uses
      None
Comment: LOSER unused
WINNER 00000000

Symbol: WINNER
   Definitions
      At line 37 in file PUSHBUTTON.s
   Uses
      None
Comment: WINNER unused
4 symbols
366 symbols in table
