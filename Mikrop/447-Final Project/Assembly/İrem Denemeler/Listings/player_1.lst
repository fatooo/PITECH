


ARM Macro Assembler    Page 1 


    1 00000000         ;*******************************************************
                       ******** 
    2 00000000         ; EQU Directives
    3 00000000         ; These directives do not allocate memory
    4 00000000         ;*******************************************************
                       ********
    5 00000000         ;SYMBOL    DIRECTIVE VALUE   COMMENT
    6 00000000 00516155 
                       ONESEC  EQU              0x00516155  ; approximately 1s 
                                                            delay at ~16 MHz cl
                                                            ock
    7 00000000 0028B0AA 
                       HALFSEC EQU              0x0028B0AA  ; approximately 0.5
                                                            s delay at ~16 MHz 
                                                            clock
    8 00000000 00145855 
                       QUARTERSEC
                               EQU              0x00145855  ; approximately 0.2
                                                            5s delay at ~16 MHz
                                                             clock
    9 00000000 001046AA 
                       FIFTHSEC
                               EQU              0x001046AA  ; approximately 0.2
                                                            s delay at ~16 MHz 
                                                            clock
   10 00000000 00082355 
                       TENTHSEC
                               EQU              0x00082355  ; approximately 0.1
                                                            s delay at ~16 MHz 
                                                            clock
   11 00000000         
   12 00000000 20001100 
                       SHIP_MEMO
                               EQU              0x20001100  ;1100-1149
   13 00000000 20006000 
                       GP_MEMORY
                               EQU              0x20006000  ;6000-60FF Zero arr
                                                            ay for random use
   14 00000000         
   15 00000000         ;*******************************************************
                       ********
   16 00000000         ; Directives - This Data Section is part of the code
   17 00000000         ; It is in the read only section  so values cannot be ch
                       anged.
   18 00000000         ;*******************************************************
                       ******** 
   19 00000000         ;LABEL  DIRECTIVE VALUE     COMMENT
   20 00000000                 AREA             sdata, DATA, READONLY
   21 00000000                 THUMB
   22 00000000         
   23 00000000         ;*******************************************************
                       ********
   24 00000000         ; Program section           
   25 00000000         ;*******************************************************
                       ********
   26 00000000         ;LABEL  DIRECTIVE VALUE     COMMENT
   27 00000000                 AREA             routines,READONLY,CODE
   28 00000000                 THUMB
   29 00000000                 ALIGN



ARM Macro Assembler    Page 2 


   30 00000000                 EXTERN           ADC_READ_SHIP ; INCLUDE ADC REA
                                                            DING MODULES
   31 00000000                 EXTERN           delay
   32 00000000                 EXTERN           PortF_Input
   33 00000000                 EXTERN           SHIP_CURSOR
   34 00000000                 EXPORT           PLAYER_1
   35 00000000         
   36 00000000         ;*******************************************************
                       ********
   37 00000000         ; Main Function
   38 00000000         ; PortF_Input reads button status to R0
   39 00000000         ; If R0 is 01 or 10 ship button is present   
   40 00000000         ; R0=0x01 CIVILIAN SHIP
   41 00000000         ; R0=0x10 BATLLESHIP
   42 00000000         ;*******************************************************
                       ******** 
   43 00000000         ;LABEL  DIRECTIVE VALUE     COMMENT
   44 00000000         
   45 00000000         PLAYER_1
                               PROC
   46 00000000 B500            PUSH             {LR}
   47 00000002         
   48 00000002 481A            LDR              R0,=FIFTHSEC ; R0 = FIFTHSEC (d
                                                            elay 0.2 second) 0.
                                                            1 DELAY
   49 00000004 F7FF FFFE       BL               delay       ; delay at least (3
                                                            *R0) cycles
   50 00000008         
   51 00000008 4D19            LDR              R5,=GP_MEMORY ; create a clear 
                                                            spot in memory 
   52 0000000A F04F 0000       MOV              R0,#00
   53 0000000E 6028            STR              R0,[R5]
   54 00000010         
   55 00000010 F7FF FFFE 
                       read_loc
                               BL               ADC_READ_SHIP ; READ SHIP LOCAT
                                                            ION 
   56 00000014         
   57 00000014 4D16            LDR              R5,=GP_MEMORY
   58 00000016 6828            LDR              R0,[R5]
   59 00000018 2800            CMP              R0,#0x00    ; if memory is empt
                                                            y read button data
   60 0000001A D11A            BNE              Skip_button ; else skip it
   61 0000001C         
   62 0000001C F7FF FFFE       BL               PortF_Input ; read all of the s
                                                            witches on Port F  
                                                                
   63 00000020 EA4F 6000       LSL              R0,R0,#24   ; SHIFT 24 TIMES
   64 00000024 4404            ADD              R4,R4,R0    ; R4 KEEPS STATUS O
                                                            F PUSHBUTTONS AND X
                                                            Y DATA  
   65 00000026 EA4F 6010       LSR              R0,R0,#24   ; SHIFT RIGHT AGAIN
                                                            
   66 0000002A         ; CHECK STATUS FOR MAPPING CONDITION
   67 0000002A         ; CHECK IF THE SHIP HAS A COLLISION WITH PREVIOUSLY DEPL
                       OYED SHIP
   68 0000002A 2811            CMP              R0,#0x11
   69 0000002C D00E            BEQ              CONT        ; NO DEPLOYMENT 
   70 0000002E 2800            CMP              R0,#0x00



ARM Macro Assembler    Page 3 


   71 00000030 D00C            BEQ              CONT        ; NO DEPLOYMENT
   72 00000032         
   73 00000032 4D0F            LDR              R5,=GP_MEMORY
   74 00000034 F04F 000F       MOV              R0,#0x0F
   75 00000038 6028            STR              R0,[R5]
   76 0000003A         
   77 0000003A         ship_memory
   78 0000003A         
   79 0000003A 4D0E            LDR              R5,=SHIP_MEMO ; take to write m
                                                            emory address
   80 0000003C 6829            LDR              R1,[R5]     ; take pointer memo
                                                            ry address
   81 0000003E 1B48            SUBS             R0,R1,R5    ; find the number o
                                                            f placed ships
   82 00000040 2814            CMP              R0,#0x14    ; if the 5th memory
                                                             location is receiv
                                                            ed
   83 00000042 D00A            BEQ              FINISH      ; do not write and 
                                                            skip to end
   84 00000044         
   85 00000044 600C            STR              R4,[R1]     ; store ship type a
                                                            nd coordinate in po
                                                            inted memory 
   86 00000046 F101 0104       ADD              R1,R1,#4    ; increment R1 for 
                                                            next ship memory lo
                                                            cation
   87 0000004A 6029            STR              R1,[R5]     ; save next ship ad
                                                            dress
   88 0000004C         
   89 0000004C F7FF FFFE 
                       CONT    BL               SHIP_CURSOR ; Write cursor or s
                                                            hip location on scr
                                                            een 
   90 00000050 E7DE            B                read_loc
   91 00000052         
   92 00000052         
   93 00000052 F1A0 0001 
                       Skip_button
                               SUB              R0,R0,#1    ; Decrement no read
                                                             counter at GP_MEMO
                                                            
   94 00000056 6028            STR              R0,[R5]
   95 00000058 E7F8            B                CONT
   96 0000005A         
   97 0000005A         
   98 0000005A         FINISH                               ; delay at least (3
                                                            *R0) cycles
   99 0000005A F7FF FFFE       BL               PortF_Input ; read all of the s
                                                            witches on Port F
  100 0000005E 2800            CMP              R0, #0x00
  101 00000060 D0FB            BEQ              FINISH
  102 00000062         
  103 00000062 2811            CMP              R0, #0x11   ;
  104 00000064 D0F9            BEQ              FINISH
  105 00000066         
  106 00000066         
  107 00000066         
  108 00000066 F85D EB04       POP              {LR}
  109 0000006A 4770            BX               LR



ARM Macro Assembler    Page 4 


  110 0000006C         ;*******************************************************
                       ********
  111 0000006C         ; End of the program  section
  112 0000006C         ;*******************************************************
                       ********
  113 0000006C         ;LABEL      DIRECTIVE       VALUE                       
                           COMMENT
  114 0000006C                 ENDP
  115 0000006C                 ALIGN
  116 0000006C                 END
              001046AA 
              20006000 
              20001100 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\player_1.d -o.\objects\player_1.o -I.\RTE\_Target_1 -
IC:\Keil_v5\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C123 -IC:\Keil_v5\AR
M\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA
 526" --predefine="TM4C123GH6PM SETA 1" --list=.\listings\player_1.lst Player_1
.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

sdata 00000000

Symbol: sdata
   Definitions
      At line 20 in file Player_1.s
   Uses
      None
Comment: sdata unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CONT 0000004C

Symbol: CONT
   Definitions
      At line 89 in file Player_1.s
   Uses
      At line 69 in file Player_1.s
      At line 71 in file Player_1.s
      At line 95 in file Player_1.s

FINISH 0000005A

Symbol: FINISH
   Definitions
      At line 98 in file Player_1.s
   Uses
      At line 83 in file Player_1.s
      At line 101 in file Player_1.s
      At line 104 in file Player_1.s

PLAYER_1 00000000

Symbol: PLAYER_1
   Definitions
      At line 45 in file Player_1.s
   Uses
      At line 34 in file Player_1.s
Comment: PLAYER_1 used once
Skip_button 00000052

Symbol: Skip_button
   Definitions
      At line 93 in file Player_1.s
   Uses
      At line 60 in file Player_1.s
Comment: Skip_button used once
read_loc 00000010

Symbol: read_loc
   Definitions
      At line 55 in file Player_1.s
   Uses
      At line 90 in file Player_1.s
Comment: read_loc used once
routines 00000000

Symbol: routines
   Definitions
      At line 27 in file Player_1.s
   Uses
      None
Comment: routines unused
ship_memory 0000003A

Symbol: ship_memory
   Definitions
      At line 77 in file Player_1.s
   Uses
      None



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Comment: ship_memory unused
7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

FIFTHSEC 001046AA

Symbol: FIFTHSEC
   Definitions
      At line 9 in file Player_1.s
   Uses
      At line 48 in file Player_1.s
Comment: FIFTHSEC used once
GP_MEMORY 20006000

Symbol: GP_MEMORY
   Definitions
      At line 13 in file Player_1.s
   Uses
      At line 51 in file Player_1.s
      At line 57 in file Player_1.s
      At line 73 in file Player_1.s

HALFSEC 0028B0AA

Symbol: HALFSEC
   Definitions
      At line 7 in file Player_1.s
   Uses
      None
Comment: HALFSEC unused
ONESEC 00516155

Symbol: ONESEC
   Definitions
      At line 6 in file Player_1.s
   Uses
      None
Comment: ONESEC unused
QUARTERSEC 00145855

Symbol: QUARTERSEC
   Definitions
      At line 8 in file Player_1.s
   Uses
      None
Comment: QUARTERSEC unused
SHIP_MEMO 20001100

Symbol: SHIP_MEMO
   Definitions
      At line 12 in file Player_1.s
   Uses
      At line 79 in file Player_1.s
Comment: SHIP_MEMO used once
TENTHSEC 00082355

Symbol: TENTHSEC
   Definitions
      At line 10 in file Player_1.s
   Uses
      None
Comment: TENTHSEC unused
7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

ADC_READ_SHIP 00000000

Symbol: ADC_READ_SHIP
   Definitions
      At line 30 in file Player_1.s
   Uses
      At line 55 in file Player_1.s
Comment: ADC_READ_SHIP used once
PortF_Input 00000000

Symbol: PortF_Input
   Definitions
      At line 32 in file Player_1.s
   Uses
      At line 62 in file Player_1.s
      At line 99 in file Player_1.s

SHIP_CURSOR 00000000

Symbol: SHIP_CURSOR
   Definitions
      At line 33 in file Player_1.s
   Uses
      At line 89 in file Player_1.s
Comment: SHIP_CURSOR used once
delay 00000000

Symbol: delay
   Definitions
      At line 31 in file Player_1.s
   Uses
      At line 49 in file Player_1.s
Comment: delay used once
4 symbols
355 symbols in table
